import{d as S,r as i,u as T,a as D,o as j,E as M,b as G,c as H,v as J,k as A,l as K,m as w,n as e,w as a,p as n,q as O,s as $,F as Q,A as m,B as k,D as W,G as X,H as Y,I as Z,J as ee,K as ae,L as te}from"./index.6b9f1d7a.js";import{u as le}from"./page.670b10f8.js";/* empty css                   *//* empty css                 *//* empty css                  *//* empty css               *//* empty css                     */import{u as oe}from"./cid.5b3c30d0.js";import{r as ue,s as se}from"./cid.dcc30f65.js";const ne={class:"container"},re=m("\u6DFB\u52A0\u7BA1\u7406\u5458"),ie=m("\u67E5\u8BE2"),de=m("\u91CD\u7F6E"),ce={class:"pagination"},me={class:"dialog-footer"},pe=m("\u53D6\u6D88"),_e=m("\u786E\u8BA4"),be=S({__name:"manager",setup(fe){const p=i(),y=oe();T();const _=i(!1),f=i(!1);D({platform:""});const C=i({id:0});i("1");const l=i({nickname:"",username:"",password:""}),x=D({nickname:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BA2\u6237\u540D\u79F0",trigger:"blur"}],username:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u53F7",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u586B\u5199\u81F3\u5C116\u4F4D\u5BC6\u7801",trigger:"blur",min:6}]}),g=i(!1),{query:o,goPage:I,goInit:v}=le(()=>E()),E=()=>{g.value=!0,ue({page_index:o.page,page_size:o.page_size,keyword:o.keyword}).then(s=>{g.value=!1,o.list=s.data.lists,o.total=s.data.total_count}).catch(()=>{g.value=!1})};j(()=>{E()});const R=()=>{o.keyword="",v()},B=()=>{var s;p&&((s=p.value)==null||s.resetFields()),_.value=!1,l.value.nickname="",l.value.username="",l.value.password="",C.value.id=0},q=async s=>{!s||await s.validate((t,d)=>{if(t){if(f.value)return;f.value=!0;const F={nickname:l.value.nickname,username:l.value.username,password:l.value.password};C.value.id||se({...F}).then(r=>{f.value=!1,B(),r.status==200&&(k.success("\u6DFB\u52A0\u6210\u529F"),v())}).catch(r=>{f.value=!1,k.error(r.message)})}else k.error("\u8BF7\u5C06\u4FE1\u606F\u586B\u5199\u5B8C\u6574")})},z=()=>{_.value=!0,y.setOperation("")};return(s,t)=>{const d=W,F=X,r=Y,c=Z,b=ee,h=ae,V=M,U=G,L=H,N=te,P=J;return A(),K(Q,null,[w("div",ne,[e(h,{justify:"space-between",align:"middle",class:"top-search"},{default:a(()=>[e(F,{span:6},{default:a(()=>[e(d,{type:"primary",onClick:z},{default:a(()=>[re]),_:1})]),_:1}),e(F,{span:18},{default:a(()=>[e(h,{justify:"end"},{default:a(()=>[e(b,{class:"",inline:!0},{default:a(()=>[e(c,{label:"\u4F7F\u7528\u4EBA/\u8D26\u53F7",style:{width:"200px"}},{default:a(()=>[e(r,{modelValue:n(o).keyword,"onUpdate:modelValue":t[0]||(t[0]=u=>n(o).keyword=u),placeholder:"\u8BF7\u8F93\u5165",clearable:""},null,8,["modelValue"])]),_:1}),e(c,null,{default:a(()=>[e(d,{type:"primary",onClick:n(v),icon:"Search"},{default:a(()=>[ie]),_:1},8,["onClick"]),e(d,{type:"info",onClick:R,icon:"RefreshRight"},{default:a(()=>[de]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),O((A(),$(U,{data:n(o).list,border:""},{default:a(()=>[e(V,{prop:"username",label:"\u8D26\u53F7",width:"",align:"center"}),e(V,{prop:"nickname",width:"",label:"\u4F7F\u7528\u4EBA",align:"center"})]),_:1},8,["data"])),[[P,g.value]]),w("div",ce,[e(L,{background:"",layout:"total, prev, pager, next","current-page":n(o).page,"page-size":n(o).page_size,total:n(o).total,onCurrentChange:n(I)},null,8,["current-page","page-size","total","onCurrentChange"])])]),e(N,{modelValue:_.value,"onUpdate:modelValue":t[5]||(t[5]=u=>_.value=u),title:n(y).operation=="edit"?"\u7F16\u8F91":"\u65B0\u589E",onClosed:B},{footer:a(()=>[w("span",me,[e(d,{type:"",onClick:B},{default:a(()=>[pe]),_:1}),e(d,{type:"primary",onClick:t[4]||(t[4]=u=>q(p.value))},{default:a(()=>[_e]),_:1})])]),default:a(()=>[e(b,{class:"common-form",ref_key:"ruleFormRef",ref:p,model:l.value,rules:x,"label-width":"200px"},{default:a(()=>[e(c,{label:"\u4F7F\u7528\u4EBA",prop:"nickname"},{default:a(()=>[e(r,{type:"text",modelValue:l.value.nickname,"onUpdate:modelValue":t[1]||(t[1]=u=>l.value.nickname=u),placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1}),e(c,{label:"\u8D26\u53F7",prop:"username"},{default:a(()=>[e(r,{type:"text",modelValue:l.value.username,"onUpdate:modelValue":t[2]||(t[2]=u=>l.value.username=u),placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1}),e(c,{label:"\u5BC6\u7801",prop:"password"},{default:a(()=>[e(r,{type:"password",modelValue:l.value.password,"onUpdate:modelValue":t[3]||(t[3]=u=>l.value.password=u),placeholder:"\u8BF7\u8F93\u5165",autocomplete:"new-password"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])],64)}}});export{be as default};
